!function(k,x){"use strict";var n="position",E="absolute",H="relative",z="px",y="left",U="right",X="top",D="bottom",e="display",t="none",c="block",T=ht.Default,v=T.getInternal(),l=Math.floor,K=Math.ceil,P=Math.PI,f=null,b=k.parseInt,d=function(c){return c.getContext("2d")},J=function(){return document},V=function(p){return J().createElement(p)},r=function(){return V("canvas")},q=function(L,U,S){L.style.setProperty(U,S,f)},N=function(g,Y,Q){T.def(ht.widget[g],Y,Q)},m=function(q,U){q.appendChild(U)},i=function(f,T){f.removeChild(T)},B=T.eventListenerOptionsFalse,s=(T.eventListenerOptionsTrue,function(w,k,G,H){w.addEventListener(k,G,H?B:B)}),R=function(R,K,H,Y){R.removeEventListener(K,H,Y?B:B)};ht.widget.RulerFrame=function(c){var p=this,f=p._view=v.createView(null,p),B=p.$1k=r(),K=p.$2k=r(),Z=p.$3k=r(),M=p.$4k=r();p._defaultRulerConfig={size:20,borderWidth:1,borderStyle:"solid",borderColor:"#888",defaultMajorTickSpacing:50,minMajorTickSpacing:10,minPhysicalMajorTickSpacing:40,maxPhysicalMajorTickSpacing:100,tickSpacingAdaptable:!0,majorTickTextFont:"12px Arial",majorTickTextColor:"#666",majorTickColor:"#888",minorTickColor:"#ccc",background:"rgba(0,0,0,0)",guideColor:"rgb(0, 173, 239)",guideWidth:2,guideVisible:!1,guideTipVisible:!1,guideTipBorderColor:"#666",guideTipTextColor:"#666",guideTipTextFont:"12px Arial",guideTipBackground:"#fff"},p._topRulerConfig={visible:!0},p._rightRulerConfig={visible:!1},p._bottomRulerConfig={visible:!1},p._leftRulerConfig={visible:!0},m(f,B),m(f,Z),m(f,K),m(f,M),q(f,n,H),q(f,"box-sizing","border-box"),q(f,"-moz-box-sizing","border-box"),q(B,n,E),q(K,n,E),q(Z,n,E),q(M,n,E),p.$14k=function(){p.$13k=1,p.iv()},p.$15k=function(J){if(p._topRulerConfig.guideVisible||p._rightRulerConfig.guideVisible||p._bottomRulerConfig.guideVisible||p._leftRulerConfig.guideVisible||p._defaultRulerConfig.guideVisible||(p._topRulerConfig.guideTipVisible||p._rightRulerConfig.guideTipVisible||p._bottomRulerConfig.guideTipVisible||p._leftRulerConfig.guideTipVisible||p._defaultRulerConfig.guideTipVisible)&&p._component){var V=f.getBoundingClientRect();p.$16k={x:J.clientX-V.left,y:J.clientY-V.top},p.$5k()}},p.setComponent(c)},N("RulerFrame",x,{ms_v:1,ms_fire:1,ms_ac:["defaultRulerConfig","topRulerConfig","rightRulerConfig","bottomRulerConfig","leftRulerConfig","component"],setComponent:function(d){var D=this,L=D._component,e=D.getView();if(e){if(D._component=d,D.fp("component",L,d),L){var I=D.getComponentView(L);i(e,I),R(e,"mousemove",D.$15k),D.removeComponentPropertyChangeListener(L,D.$14k)}if(d){var $=D.getComponentView(d);m(e,$),q($,n,E),s(e,"mousemove",D.$15k),D.addComponentPropertyChangeListener(d,D.$14k)}}},addComponentPropertyChangeListener:function(p,B){p&&p.mp&&p.mp(B)},removeComponentPropertyChangeListener:function(X,q){X&&X.ump&&X.ump(q)},getComponentHZoom:function(K){return K&&K.getZoom?K.getZoom():1},getComponentVZoom:function(q){return q&&q.getZoom?q.getZoom():1},getComponentViewRect:function(t){return t&&t.getViewRect?t.getViewRect():void 0},getComponentView:function(M){return M&&M.getView?M.getView():M},invalidateComponent:function(I){I&&I.iv&&I.iv()},validateComponent:function(l){l&&l.validate&&l.validate()},$7k:function(B,T,W,S,x,p,G,N,C,s,P,A){if(T.visible){var z=this._defaultRulerConfig,F="borderStyle",g="borderColor",E="borderWidth",b="background",H=T[F]||z[F],Z=T[g]||z[g],$=T[E]||z[E],n=T.size!=f?T.size:z.size,i=T[b]||z[b],D=n+$,w=this.$6k($,H,Z,B,W,x,D,G,N,C,s,P,A);q(B,x,"0px"),p?v.setCanvas(B,S-w,n):v.setCanvas(B,n,S-w),q(B,"background",i),q(B,e,c)}else q(B,e,t),q(this.getComponentView(this._component),x,"0px")},$6k:function(M,x,U,l,I,Y,E,X,w,Q,p,K,F){var g=0;return q(l,I,M+"px "+x+" "+U),q(this.getComponentView(this._component),Y,E+z),X?(q(l,w,Q+z),g+=Q):q(l,w,"0px"),p?(q(l,K,F+z),g+=F):q(l,K,"0px"),g},validateImpl:function(){var w=this,i=w._component,O=w.$1k,T=w.$2k,K=w.$3k,h=w.$4k,L=w._view,q=w._defaultRulerConfig,Q=w._topRulerConfig,a=w._rightRulerConfig,k=w._bottomRulerConfig,G=w._leftRulerConfig,A=q.size;if(L&&i){var V=Q.size!=f?Q.size:A,E=a.size!=f?a.size:A,S=k.size!=f?k.size:A,H=G.size!=f?G.size:A;w.$7k(O,Q,"border-bottom",L.offsetWidth,X,!0,G.visible,y,H,a.visible,U,E),w.$7k(T,a,"border-left",L.offsetHeight,U,!1,Q.visible,X,V,k.visible,D,S),w.$7k(K,k,"border-top",L.offsetWidth,D,!0,G.visible,y,H,a.visible,U,E),w.$7k(h,G,"border-right",L.offsetHeight,y,!1,Q.visible,X,V,k.visible,D,S),w.$13k?delete w.$13k:w.invalidateComponent(i),w.validateComponent(i),w.$5k()}},$5k:function(){function j(A,G,F,P,K,v){if(G.visible){var u=d(A),V=G[b]||Z,j=G[Q]!=f?G[Q]:r,s=G[y]||R,O=G[$]||B,w=G.size!=f?G.size:a,cn=G[L]||i,hl=G[l]||C,Nh=G[U]||_,tj=G[n]!=f?G[n]:D,El=G[x]!=f?G[x]:p,dc=G[h]!=f?G[h]:g,fi=G[m]!=f?G[m]:S,kn=G[c]!=f?G[c]:W,Hp=G[t]!=f?G[t]:X,Sq=G[k]||Ac,lq=G[Y]||cs;j&&(V=z[v]=z.$8k(z[v]||V,G[E]||T,G[q]||o,P?H:I,hl)),F.call(z,u,M,N,J,e,w,P?H:I,V,s,O,K,cn,Nh);var Xn=z.$16k;(tj||El)&&Xn&&(P?z.$9k(u,Xn.x,w,Sq,lq,tj,El,dc,fi,kn,Hp):z.$10k(u,Xn.y,w,Sq,lq,tj,El,dc,fi,kn,Hp,K))}}var z=this,s=z.$1k,O=z.$2k,G=z.$3k,K=z.$4k,F=z._topRulerConfig,w=z._rightRulerConfig,u=z._bottomRulerConfig,V=z._leftRulerConfig,P=z._defaultRulerConfig,v=z._component,A=z.getComponentViewRect(v),H=z.getComponentHZoom(v),I=z.getComponentVZoom(v),M=A.x*H,J=M+A.width*H,N=A.y*I,e=N+A.height*I,a=z._defaultRulerConfig.size,b="defaultMajorTickSpacing",E="maxPhysicalMajorTickSpacing",q="minPhysicalMajorTickSpacing",Q="tickSpacingAdaptable",y="majorTickTextFont",$="majorTickTextColor",L="majorTickColor",U="minorTickColor",n="guideVisible",x="guideTipVisible",h="guideTipBorderColor",m="guideTipTextColor",c="guideTipTextFont",t="guideTipBackground",k="guideColor",Y="guideWidth",l="minMajorTickSpacing",Z=P[b],T=P[E],o=P[q],r=P[Q],R=P[y],B=P[$],i=P[L],C=P[l],_=P[U],D=P[n],p=P[x],g=P[h],S=P[m],W=P[c],X=P[t],Ac=P[k],cs=P[Y];z._view&&v&&(j(s,F,z.$11k,!0,!1,"_currentTopMajorTickSpacing"),j(O,w,z.$12k,!1,!0,"_currentRightMajorTickSpacing"),j(G,u,z.$11k,!0,!0,"_currentBottomMajorTickSpacing"),j(K,V,z.$12k,!1,!1,"_currenLeftMajorTickSpacing"))},$8k:function(Z,N,E,p,V){return E>Z*p?Z=l(N/p/V)*V:Z*p>N&&(Z=K(E/p/V)*V),Z},getHTipText:function(c){var U=this,o=U._component,G=0,t=U._view.getBoundingClientRect();return o.lp?G=b(o.lp({x:c.x+t.left,y:c.y}).x):G-=b(this.getComponentView(o).style.left)||0,G},$9k:function(k,R,m,d,c,h,Y,a,z,J,n){var r=this,B=r._component;k.save(),v.translateAndScale(k,0,0,1);var O=R-(b(this.getComponentView(B).style.left)||0),H=0;if(R=r.getHTipText(r.$16k),h&&(k.beginPath(),k.fillStyle=d,k.rect(O,H,c,m),k.fill()),Y){k.beginPath(),k.textAlign="center",k.textBaseline="middle",k.font=J;var U=k.measureText(R).width+6;k.fillStyle=n,k.rect(O-U/2,H,U,m),k.fill(),k.strokeStyle=a,k.stroke(),k.beginPath(),k.fillStyle=z,k.fillText(R,O,H+m/2)}k.restore()},getVTipText:function(V){var c=this,O=c._component,M=0,t=c._view.getBoundingClientRect();return O.lp?M=b(O.lp({x:V.x,y:V.y+t.top}).y):M-=b(this.getComponentView(O).style.top)||0,M},formatScaleText:function(e){return Math.round(e)},$10k:function(H,E,D,Q,X,I,J,L,x,f,V,h){var B=this,l=B._component;H.save(),v.translateAndScale(H,0,0,1);var u=D/2,q=E-(b(this.getComponentView(l).style.top)||0);if(E=B.getVTipText(B.$16k),I&&(H.beginPath(),H.fillStyle=Q,H.rect(u-D/2,q,D,X),H.fill()),J){H.translate(u,q),H.rotate((h?90:-90)*P/180),H.translate(-u,-q),H.beginPath(),H.textAlign="center",H.textBaseline="middle",H.font=f;var m=H.measureText(E).width+6;H.fillStyle=V,H.rect(u-m/2,q-D/2,m,D),H.fill(),H.strokeStyle=L,H.stroke(),H.fillStyle=x,H.fillText(E,u,q)}H.restore()},$11k:function(H,$,K,J,r,Z,B,E,n,d,U,G,S){H.save(),K=0;var V=$,D=J,I=(V+D)/2;$=0,J=D-V,v.translateAndScale(H,0,0,1);var L=0,g=0,N=b(Z/2),s=Z-N,h=U?0:N,X=E*B,f=X/10;$-=X,J+=X,H.clearRect($,0,J-$,Z),H.beginPath(),H.fillStyle=S;var M=l(I/f)*f-V;for(L=M;J>L;L+=f)H.rect(L,K+h,1,s);for(L=M;L>$;L-=f)H.rect(L,K+h,1,s);for(H.fill(),h=U?0:1,H.beginPath(),H.fillStyle=G,M=l(I/X)*X-V,L=M;J>L;L+=X)H.rect(L,K+h,1,Z-1);for(L=M;L>$;L-=X)H.rect(L,K+h,1,Z-1);H.fill();var z=b(/\d+px/.exec(n)[0]),q=(z||10)/2;H.textBaseline="middle",h=U?Z-q-2:q+2,H.beginPath(),H.fillStyle=d,H.font=n;var u=l(I/X)*X/B;for(L=M,g=u;J>L;L+=X,g+=E){var R=this.getHScaleText?this.getHScaleText(L):g;H.fillText(this.formatScaleText(R),L+2,K+h)}for(L=M,g=u;L>$;L-=X,g-=E){var R=this.getHScaleText?this.getHScaleText(L):g;H.fillText(this.formatScaleText(R),L+2,K+h)}H.restore()},$12k:function(H,W,S,E,z,L,X,K,T,Q,q,x,j){function G(X,N,t,h,S,l){S=f.getVScaleText?f.getVScaleText(t):S,S=f.formatScaleText(S),H.translate(X+N,t),H.rotate(-h),H.translate(-X-N,-t),H.fillText(S,X+N+(l?2:1),t),H.translate(X+N,t),H.rotate(h),H.translate(-X-N,-t)}H.save(),W=0;var N=S,B=z,i=(N+B)/2;S=0,z=B-N,v.translateAndScale(H,0,0,1);var r=0,f=this,g=0,m=b(L/2),$=L-m,k=q?0:m,O=K*X,F=O/10;S-=O,z+=O,H.clearRect(W,0,L,z-S),H.beginPath(),H.fillStyle=j;var J=l(i/F)*F-N;for(r=J;z>r;r+=F)H.rect(W+k,r,$,1);for(r=J;r>S;r-=F)H.rect(W+k,r,$,1);for(H.fill(),k=q?0:1,H.beginPath(),H.fillStyle=x,J=l(i/O)*O-N,r=J;z>r;r+=O)H.rect(W+k,r,L-1,1);for(r=J;r>S;r-=O)H.rect(W+k,r,L-1,1);H.fill();var e=b(/\d+px/.exec(T)[0]),Y=(e||10)/2,a=90*P/180;H.textBaseline="middle",k=q?L-Y:Y+2,a=q?-a:a,H.beginPath(),H.fillStyle=Q,H.font=T;var V=l(i/O)*O/X;for(r=J,g=V;z>r;r+=O,g+=K)G(W,k,r,a,g,q);for(r=J,g=V;r>S;r-=O,g-=K)G(W,k,r,a,g,q);H.restore()},onPropertyChanged:function(){this.iv()},dispose:function(){var g=this,C=g._component,H=g._view;C&&g.removeComponentPropertyChangeListener(C,g.$14k),H&&(R(H,"mousemove",g.$15k),i(H.parentNode,H),g._view=null)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);