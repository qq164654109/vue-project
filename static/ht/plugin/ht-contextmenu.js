!function(F,s){"use strict";var h="ht",i=F[h],V="position",D="absolute",g="px",L="left",$="top",R="innerHTML",P="className",j="width",y="height",E="0",B="display",r="none",M="visibility",c="user-select",t="margin",T="padding",N=null,J=i.Color,x=i.Default,H=x.getInternal(),q=F.setTimeout,K=F.setInterval,I=F.clearTimeout,A=F.clearInterval,l=F.parseInt,m=x.isLeftButton,b=x.isDragging,U=x.startDragging,e=x.getDistance,X=x.isTouchable,Y=J.widgetIconHighlight,n=J.widgetIconBorder,k=J.widgetIconGradient,f=function(){return document},Q=function(G,W){return G.querySelectorAll(W)},Z=function(m){var $=f().createElement(m);return"ul"===m&&(G($,V,"relative"),G($,t,E),G($,T,E),G($,"list-style",r),G($,"box-sizing","border-box"),G($,"-moz-box-sizing","border-box"),G($,B,"inline-block"),G($,"vertical-align","text-bottom"),G($,"border","1px solid "+x.contextMenuBorderColor),G($,"box-shadow","0 0 16px 1px "+x.contextMenuShadowColor),G($,"overflow","hidden"),x.contextMenuBorderRadius&&G($,"border-radius",x.contextMenuBorderRadius+g)),$},o=function(n){var x=n.touches[0];return x?x:n.changedTouches[0]},C=function(){return Z("div")},d=function(){return Z("canvas")},G=function(k,F,A){k.style.setProperty(F,A,N)},W=function(B,V,c){x.def(i.widget[B],V,c)},a=function(y,L){y.appendChild(L)},u=function(u,Y){u.removeChild(Y)},z=x.eventListenerOptionsFalse,v=(x.eventListenerOptionsTrue,function(e,$,q,S){e.addEventListener($,q,S?z:z)}),O=function(L,g,R,k){L.removeEventListener(g,R,k?z:z)};H.addMethod(x,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:n},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:Y}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:n},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:Y,gradient:x.imageGradient,gradientColor:k,background:Y}]},contextMenuLabelFont:(X?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var _=function(n){var b=this,l=n._view;if(b.$11b=n,b.addListeners(),v(l,"contextmenu",function(h){h.preventDefault()}),!X){var D=b.$37b=b.$36b.bind(b);v(l,"mouseover",D),v(l,"mouseout",D)}};x.def(_,s,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(A){if(x.preventDefault(A),m(A)){for(var L=this,n=L.$11b,y=L.getView(),E=y.children,v=0;v<E.length;v++){var I=E[v],f=I.$24b,b=I.$25b;if(f&&f.contains(A.target))return n.scrollUp(I),L.$28b=q(function(){L.$29b=K(function(){n.scrollUp(I)},100)},500),U(L,A),void 0;if(b&&b.contains(A.target))return n.scrollDown(I),L.$28b=q(function(){L.$29b=K(function(){n.scrollDown(I)},100)},500),U(L,A),void 0}X&&(A=o(A)),L.$30b={x:A.pageX,y:A.pageY}}},handle_mousedown:function(j){this.handle_touchstart(j)},handle_touchend:function(c){if(m(c)){var u=this,G=u.$30b,i=X?{x:o(c).pageX,y:o(c).pageY}:{x:c.pageX,y:c.pageY};if(!G||e(G,i)>1)return delete u.$30b,void 0;for(var E=u.getView(),z=u.$11b,Q=c.target,q=N,p=N,P=z._items,y=E.$26b,W=0;W<y.length;W++)if(p=y[W],p.contains(Q)){q=p.getAttribute("data-id");break}if(q&&P){var B=z.$17b(P,function(t){return t._id===q});if(B){var M=!1;B.disabled instanceof Function?M=B.disabled.call(z,B):B.disabled===!0&&(M=!0),M||(B.items?X&&u.$36b(p,!0):z.$1b(B,c))}}delete u.$30b}},$36b:function(f,y){if(!b()){var Y,T=this,l=T.$11b,q=T.getView(),e=l.$20b||q.children[0],_=l.$19b,S=q.$26b,F=q.children,s=f.target,d=q.getBoundingClientRect(),E=x.getWindowInfo(),j=E.width,v=E.height,I=function(p){for(var B=0;B<F.length;B++){var n=F[B],S=new RegExp(p+"$"),_=n[P];if(_&&(S.test(_)||_.indexOf(p+" ")>=0))return n}},A=function(Y){for(var o=0;o<S.length;o++){var K=S[o],j=new RegExp(Y+"$"),C=K[P];if(C&&(j.test(C)||C.indexOf(Y+" ")>=0))return K}},O=function(a){var C=A("menu-item"+a.$45b),y=C.getBoundingClientRect(),w=y.top-d.top,B=y.left-d.left;G(a,$,w+g),G(a,L,B+y.width+g);var s=a.getBoundingClientRect(),N=s.top,S=s.left,R=s.height,b=s.width,h=N+R+2,H=S+b+2;h>v&&G(a,$,w+v-h+g),H>j&&G(a,L,B-b+g)};if(y)Y=f;else{if("mouseover"===f.type){for(var w=0;w<S.length;w++){var Q=S[w];if(Q.contains(s)){Y=Q;break}}if(!Y&&_){var H=_.parentNode,z=I("submenu"+_.getAttribute("data-id"));(z&&z.contains(s)||H&&H.contains(s))&&(Y=_)}}else if("mouseout"===f.type){for(var C=!1,p=f.relatedTarget,w=0;w<F.length;w++){var B=F[w];if("hidden"!==B.style.visibility&&B.contains(p)){C=!0;break}}if(C)return}!Y&&e&&(Y=A("menu-item"+(e.$45b||"NaN")))}if(Y!=_){if(_)for(var K=_;K;){if(K[P]=K[P].replace(" menu-item-hover",""),K[P].indexOf("disabled")<0){var a=l.getItemByProperty("_id",K.getAttribute("data-id"));null!=a.background?a.background instanceof Function?G(K,"background-color",a.background.call(l,a)):G(K,"background-color",a.background):G(K,"background-color",x.contextMenuBackground),G(K,"color",x.contextMenuLabelColor)}var n=I("submenu"+K.getAttribute("data-id"));n&&G(n,M,"hidden");var J=K.parentNode;K=A("menu-item"+(J.$45b||"NaN"))}if(Y){for(var R=Y,r=[];R;){R[P]+=" menu-item-hover",R[P].indexOf("disabled")<0&&(G(R,"background-color",x.contextMenuHoverBackground),G(R,"color",x.contextMenuHoverLabelColor));var h=I("submenu"+R.getAttribute("data-id"));h&&(G(h,M,"visible"),r.push(h));var J=R.parentNode;R=A("menu-item"+(J.$45b||"NaN"))}r.reverse(),r.forEach(function(U){O(U)})}}l.$19b=Y,l.$20b=Y?Y.parentNode:q.children[0]}},handle_mouseup:function(D){this.handle_touchend(D)},handleWindowTouchEnd:function(){var j=this;j.$28b!=N&&(I(j.$28b),delete j.$28b),j.$29b!=N&&(A(j.$29b),delete j.$29b),delete j.$34b,delete j.$30b,delete j.$35b},handleWindowMouseUp:function(D){this.handleWindowTouchEnd(D)},handle_mousemove:function(t){this.handle_touchmove(t)},handle_touchmove:function(M){if(!b()&&m(M)){for(var Z=this,v=Z.getView().children,t=N,i=0;i<v.length;i++){var E=v[i];if(E.contains(M.target)){t=E;break}}var _=Z.$30b,d=X?{x:o(M).pageX,y:o(M).pageY}:{x:M.pageX,y:M.pageY};t&&_&&e(_,d)>2&&(U(Z,M),Z.$34b=t,Z.$35b=t.$18b)}},handleWindowTouchMove:function(e){e.preventDefault();var t=this,B=t.$11b,I=t.$34b,k=t.$35b,v=t.$30b;if(v&&I){var r=X?{x:o(e).pageX,y:o(e).pageY}:{x:e.pageX,y:e.pageY},h=r.y-v.y;h>0?B.scrollUp(I,I.$18b-(k-h)):B.scrollDown(I,k-h-I.$18b)}},handleWindowMouseMove:function(J){this.handleWindowTouchMove(J)},$10b:function(z,j){z.preventDefault();for(var k=this,O=k.getView().children,y=N,t=0;t<O.length;t++){var H=O[t];if(H.contains(z.target)){y=H;break}}if(y){var g=this.$11b,C=g.getRowHeight();Math.abs(j)>.05&&(j>0?g.scrollUp(y,j*C):0>j&&g.scrollDown(y,-j*C))}},handle_mousewheel:function(J){this.$10b(J,J.wheelDelta/40)},handle_DOMMouseScroll:function(G){this.$10b(G,-G.detail)},$44b:function(n){this.getView().contains(n.target)||this.$11b.hide()},$41b:function(f){this.$11b.show(f)},$4b:function(N,b){var x=this.$11b;if(b=b||x._items,b&&b.length&&N.keyCode){var X=[N.keyCode];N.shiftKey&&X.push(16),N.ctrlKey&&X.push(17),N.altKey&&X.push(18),/mac/.test(F.navigator?F.navigator.userAgent.toLowerCase():"")?N.metaKey&&X.push(17):N.metaKey&&X.push(91),X.sort();var z=X.join(),q=x.$17b(b,function(V){if(V.key){var v=V.key.slice(0);return v.sort(),z===v.join()}});if(q){q.preventDefault!==!1&&N.preventDefault();var T=!1;q.disabled instanceof Function?T=q.disabled.call(x,q):q.disabled===!0&&(T=!0),T||x.$1b(q,N)}}},$39b:function(N){var u=this,r=o(N);u.$32b={x:r.pageX,y:r.pageY}},$38b:function(p){var x=this,i=o(p);x.$31b={x:i.pageX,y:i.pageY},x.$33b=q(function(){x.$31b&&(x.$32b?e(x.$31b,x.$32b)<10&&x.$11b.show(p):x.$11b.show(p)),delete x.$33b,delete x.$31b,delete x.$32b},600)},$40b:function(){var t=this;t.$33b!=N&&(I(t.$33b),delete t.$33b,delete t.$31b,delete t.$32b)}}),i.widget.ContextMenu=function(t){var E=this,n=E._view=H.createView(null,E);n[P]="ht-widget-contextmenu",E.setItems(t),E.$13b=new _(E),G(n,"font",x.contextMenuLabelFont),G(n,V,D),G(n,"cursor","default"),G(n,"-webkit-"+c,r),G(n,"-moz-"+c,r),G(n,"-ms-"+c,r),G(n,c,r),G(n,"box-sizing","border-box"),G(n,"-moz-box-sizing","border-box"),x.baseZIndex!=N&&G(n,"z-index",l(x.baseZIndex)+2+""),E.$3b=function(h){E.$13b.$4b(h)}},W("ContextMenu",s,{$5b:0,_items:N,$21b:N,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var s=this,n=s._enableGlobalKey;n===!1&&(v(f(),"keydown",s.$3b),s._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,O(f(),"keydown",this.$3b)},setItems:function(s){this._items=s},getItems:function(){return this._items},setVisibleFunc:function(m){this.$16b=m},setLabelMaxWidth:function(O){this.$43b=O},$1b:function(H,r){var X=this;if("check"===H.type)H.selected=!H.selected;else if("radio"===H.type){var Y=H.groupId;X.$17b(X._items,function(L){L.groupId===Y&&(L.selected=!1)}),H.selected=!0}if(X.hide(),H.action)H.action.apply(H.scope||X,[H,r]);else if(H.href){var A=H.linkTarget||"_self";F.open(H.href,A)}},getItemById:function(_){return this.getItemByProperty("id",_)},setItemVisible:function(T,r){var A=this.getItemById(T);A&&(A.visible=r)},getItemByProperty:function(p,b,e){var X=this;if(e=e||X._items,!e||0===e.length)return N;var q=X.$17b(e,function(j){return j[p]===b});return q||N},scrollUp:function(K,G){var h=this;if(G=G==N?20:G,G=l(G),0!==G){var S=0;K.$18b>G&&(S=K.$18b-G),h.$42b(K,S),K.scrollTop=S,K.$18b=S}},scrollDown:function(v,P){var C=this;if(P=P==N?20:P,P=l(P),0!==P){var u=v.$22b,X=v.$23b,H=u-X;X+v.$18b+P<u&&(H=v.$18b+P),C.$42b(v,H),v.scrollTop=H,v.$18b=H}},$42b:function(p,H){H=H==N?p.$18b:H;var E=p.$24b,O=p.$25b;E&&(G(E,"top",H+g),0==H?G(E,B,r):G(E,B,"block")),O&&(G(O,"bottom",-H+g),H==p.$22b-p.$23b?G(O,B,r):G(O,B,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(p,I){for(var C=0;C<p.length;C++){var Q=p[C];if(I(Q))return Q;if(Q.items){var d=this.$17b(Q.items,I);if(d)return d}}},$2b:function(F,w){for(var o=this,S=0;S<F.length;S++){o.$5b++;var s=F[S];if(s.visible!==!1&&!(x.isFunction(s.visible)&&s.visible()===!1||o.$16b&&!o.$16b.call(o,s))){var U=Z("li"),O=o.$5b+"";if(G(U,"white-space","nowrap"),G(U,B,"block"),"separator"===s||s.separator===!0){var p=C();p[P]="separator",G(p,y,x.contextMenuSeparatorWidth+g),G(p,"background",x.contextMenuSeparatorColor),a(U,p)}else{s._id=O,U.setAttribute("data-id",O);var $=Z("span"),K=Z("span"),z=d(),I=C();if(G($,B,"inline-block"),G($,y,"1.2em"),G(K,B,"inline-block"),G(K,y,"1.2em"),G(K,"line-height","1.2em"),z[P]="prefix",G(z,B,"inline-block"),G(z,j,"1em"),G(z,y,"1em"),G(z,"vertical-align","middle"),G(z,t,"0 0.2em"),"check"===s.type&&s.selected?z[P]+=" check-prefix":"radio"===s.type&&s.selected&&(z[P]+=" radio-prefix"),a(U,z),s.icon){var v=d();v[P]="contextmenu-item-icon",G(v,B,"inline-block"),G(v,y,"1.2em"),G(v,j,"1.2em"),G(v,"margin-right","0.2em"),G(v,"float","left"),v.$50b=s.icon,v._item=s,a($,v)}if(K[R]=s.label,a($,K),a(U,$),I[P]="suffix",G(I,B,"inline-block"),G(I,"margin-left","1em"),G(I,"margin-right","0.4em"),G(I,"text-align","right"),G(I,"font-size","75%"),s.items&&(I[R]=x.contextMenuSubmenuMark),s.suffix&&(I[R]=s.suffix),a(U,I),U[P]="menu-item menu-item"+O,null!=s.background?s.background instanceof Function?G(U,"background-color",s.background.call(o,s)):G(U,"background-color",s.background):G(U,"background-color",x.contextMenuBackground),G(U,"color",x.contextMenuLabelColor),G(U,T,"3px 0"),s.disabled instanceof Function){var l=s.disabled.call(o,s);l&&(U[P]+=" disabled",G(U,"color",x.contextMenuDisabledLabelColor))}else s.disabled&&(U[P]+=" disabled",G(U,"color",x.contextMenuDisabledLabelColor));if(s.items){o.$21b||(o.$21b=new i.List);var m=Z("ul");m[P]="submenu"+O,m.$45b=O,G(m,M,"hidden"),G(m,V,D),a(o._view,m),o.$21b.add(m),o.$2b(s.items,m)}}a(w,U)}}},rebuild:function(){var K=this,p=K._items,l=K._view;if(l&&(l[R]="",K.$21b=N,K.$5b=0,K.$19b=N,K.$20b=N,l.$26b=N,p&&0!==p.length)){var M=Z("ul",K._r);a(l,M),K.$2b(p,M)}},addTo:function(R){if(R){var G=this,M=G.$13b;if(G.$12b=R,G.$9b=function(h){M.$44b(h)},G.$27b=function(b){M.$41b(b)},X){var s=G.$6b=function(I){M.$38b(I)},F=G.$7b=function(W){M.$39b(W)},T=G.$8b=function(N){M.$40b(N)};v(R,"touchstart",s,!0),v(R,"touchmove",F),v(R,"touchend",T)}else v(R,"contextmenu",G.$27b)}},showOnView:function(R,S,F){R=R.getView?R.getView():R;var l=x.getWindowInfo(),m=R.getBoundingClientRect();this.show(m.left+l.left+S,m.top+l.top+F)},show:function(l,H,h){var F=this,h=h==N?!0:!1,M=F._view;if(M){if(F.invalidate(),1===arguments.length){var b=l;if(X){var Z=o(b);l=Z.pageX,H=Z.pageY}else l=b.pageX,H=b.pageY}var y=x.getWindowInfo(),K=y.width,k=y.height,w=y.left,S=y.top,O={pageX:l,pageY:H,clientX:l-w,clientY:H-S,target:1,originEvent:b},i=O.clientX,U=O.clientY,A=function(Y){Y.style.height=k-6+g;var _=C(),s=C(),o=function(u){G(u,V,D),G(u,"text-align","center"),G(u,j,"100%"),G(u,"font-size",10+g),G(u,"padding","2px 0"),G(u,"border","0px solid "+x.contextMenuScrollerBorderColor),G(u,"background-color",x.contextMenuScrollerColor1),u.style.backgroundImage="-webkit-linear-gradient(top, "+x.contextMenuScrollerColor1+", "+x.contextMenuScrollerColor2+")",u.style.backgroundImage="linear-gradient(to bottom, "+x.contextMenuScrollerColor1+", "+x.contextMenuScrollerColor2+")"};_[P]="menu-arrow-item menu-arrow-item-top",s[P]="menu-arrow-item menu-arrow-item-bottom",o(_),G(_,"top",E),G(_,"left",E),G(_,"border-bottom-width",1+g),_[R]="▲",o(s),G(s,"bottom",E),G(s,"left",E),G(s,"border-top-width",1+g),s[R]="▼",Y.$24b=_,Y.$25b=s,Y.$18b=Y.scrollTop,Y.$22b=Y.scrollHeight,Y.$23b=Y.clientHeight,a(Y,_),a(Y,s),F.$42b(Y)};F.beforeShow&&F.beforeShow(O);var n=F._items;if(n&&(b&&b.preventDefault(),n.length)){F.rebuild(),x.appendToScreen(M),M.$26b=Q(M,".menu-item");var u=M.children[0];u.offsetHeight>k&&A(u);var T=U+(h?1:0),s=i+(h?1:0),m=function(n){for(var q=0,u=0,P=0,E=F.$43b;P<n.children.length;P++){var M=n.children[P];if(M.getAttribute("data-id")){var b=M.children[1],Y=M.children[2],i=b.children;if(E){var r=i[0];i.length>1&&(r=i[1]),r.offsetWidth>E&&(r[R]="<marquee scrollamount='3'>"+r[R]+"</marquee>",r.children[0].style.verticalAlign="text-bottom",G(r,j,E+g),G(r,B,"inline-block"))}var L=b.offsetWidth,y=Y.offsetWidth;L>q&&(q=L),y>u&&(u=y)}}for(P=0;P<n.children.length;P++){var M=n.children[P];if(M.getAttribute("data-id")){var b=M.children[1],Y=M.children[2],$=b.children[0],o=b.children[1];!o&&$.style.width&&G($,j,q+g),G(b,j,q+g),G(Y,j,u+g)}}};m(u);var d=U+3+M.offsetHeight,q=i+3+M.offsetWidth;d>k?G(M,$,T-(d-k)+S+g):G(M,$,T+S+g),q>K?G(M,L,s-(q-K)+w+g):G(M,L,s+w+g);var J=F.$21b;J&&J.each(function(l){m(l),l.offsetHeight>k&&A(l)}),F.$9b&&v(f(),X?"touchstart":"mousedown",F.$9b,!0),F.afterShow&&F.afterShow(O),F.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=N:!1},getRelatedView:function(){return this.$12b},hide:function(){var i=this,r=i._view;r&&r.parentNode&&(u(r.parentNode,r),O(f(),X?"touchstart":"mousedown",i.$9b,!0),i.afterHide&&i.afterHide())},dispose:function(){var B=this,_=B.$12b,p=B._view;p&&(p.parentNode&&u(p.parentNode,p),B.disableGlobalKey(),_&&(X?(O(_,"touchstart",B.$6b,!0),O(_,"touchmove",B.$7b),O(_,"touchend",B.$8b)):O(_,"contextmenu",B.$27b)),B._view=B._items=B.$21b=B.$19b=B.$12b=B.beforeShow=B.afterShow=B.afterHide=B.$9b=B.$3b=B.$6b=B.$7b=B.$8b=B.$27b=N)},$46b:function(X,g,f,b,e){var o=H.initContext(X);H.translateAndScale(o,0,0,1),o.clearRect(0,0,f,b),x.drawStretchImage(o,x.getImage(g),"fill",0,0,f,b,e,this),o.restore()},$47b:function(){var U,z,O,g=this,i=g._view;if(g.isShowing()){var r=Q(i,".check-prefix");for(O=0;O<r.length;O++){var s=r[O];U=s.clientWidth,z=s.clientHeight,s.$48b=U,s.$49b=z,H.setCanvas(s,U,z)}var R=Q(i,".radio-prefix");for(O=0;O<R.length;O++){var p=R[O];U=p.clientWidth,z=p.clientHeight,p.$48b=U,p.$49b=z,H.setCanvas(p,U,z)}var P=Q(i,".contextmenu-item-icon");for(O=0;O<P.length;O++){var y=P[O];U=y.clientWidth,z=y.clientHeight,y.$48b=U,y.$49b=z,H.setCanvas(y,U,z)}}},validateImpl:function(){var J,n,k,L=this,a=L._view;if(L.isShowing()){var j=Q(a,".check-prefix");for(k=0;k<j.length;k++){var q=j[k];J=q.$48b,n=q.$49b,J&&n&&L.$46b(q,x.contextMenuCheckIcon,J,n)}var v=Q(a,".radio-prefix");for(k=0;k<v.length;k++){var t=v[k];J=t.$48b,n=t.$49b,J&&n&&L.$46b(t,x.contextMenuRadioIcon,J,n)}var u=Q(a,".contextmenu-item-icon");for(k=0;k<u.length;k++){var c=u[k];J=c.$48b,n=c.$49b,J&&n&&L.$46b(c,x.getImage(c.$50b),J,n,c._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);