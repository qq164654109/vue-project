!function(w){"use strict";var $="ht",d=w[$],h=d.Default,L=Math,I=(L.PI,L.sin,L.cos,L.atan2,L.sqrt,L.max),x=L.floor,n=(L.round,L.ceil),K=d.Shape,u=(d.Edge,d.List),t=d.Style,p=d.graph,P=h.getInternal(),V=P.ui(),Y=null,M="prototype",r=w.clearInterval,j=w.setInterval,m=function(d){var k=d.data,v=this.dm();if(k&&"add"===d.kind){var h=v.$1c,_=k instanceof K?"shape.":"edge.";h&&k.s(_+"dash.flow")&&h.indexOf(k)<0&&h.push(k)}"clear"===d.kind&&(v.$1c=[])},q=function(H){var w=H.property,c=H.data,e=H.newValue,J=this.dm().$1c,m=c instanceof K?"s:shape.dash.flow":"s:edge.dash.flow";if(J&&w===m)if(e)J.indexOf(c)<0&&J.push(c);else for(var X=J.length,D=0;X>D;D++)if(J[D]===c){J.splice(D,1);break}},F=p.GraphView[M],s=V.EdgeUI[M],Q=V.ShapeUI[M],H=Q._80o,z=s._80o,v=d.DataModel[M],A=v.prepareRemove,b=F.setDataModel;t["edge.dash.flow.step"]==Y&&(t["edge.dash.flow.step"]=3),t["shape.dash.flow.step"]==Y&&(t["shape.dash.flow.step"]=3),v.prepareRemove=function(N){A.call(this,N);var k=N._dataModel,D=k.$1c;if(D)for(var _=D.length,h=0;_>h;h++)if(D[h]===N){D.splice(h,1);break}},F.setDataModel=function(x){var Q=this,n=Q._dataModel;if(n!==x){n&&(n.umm(m,Q),n.umd(q,Q),n.$1c=[]),x.mm(m,Q),x.md(q,Q);var z=x.$1c=[];x.each(function(s){var t=s instanceof K?"shape.":"edge.";s.s(t+"dash.flow")&&z.indexOf(s)<0&&z.push(s)}),b.call(Q,x)}},F.setDashFlowInterval=function($){var L=this,R=L.$2c;L.$2c=$,L.fp("dashFlowInterval",R,$),L.$3c!=Y&&(r(L.$3c),delete L.$3c,L.enableDashFlow($))},F.getDashFlowInterval=function(){return this.$2c},F.$4c=function(){var v,F,j,w=this,H=w.tx(),z=w.ty(),D=w._zoom,E=w.getWidth(),J=w.getHeight(),$={x:-H/D,y:-z/D,width:E/D,height:J/D},A=w.dm().$1c,y=w._56I,S=new u;if(A.forEach(function(M){y[M.getId()]&&(v=w.getDataUI(M),v&&(j=v._79o(),j&&S.add(j)))}),0!==S.size()&&(S.each(function(R){h.intersectsRect($,R)&&(F=h.unionRect(F,R))}),F&&(F&&(h.grow(F,I(1,1/D)),F.x=x(F.x*D)/D,F.y=x(F.y*D)/D,F.width=n(F.width*D)/D,F.height=n(F.height*D)/D,F=h.intersection($,F)),F))){var c=w._canvas.getContext("2d");c.save(),c.lineCap=h.lineCap,c.lineJoin=h.lineJoin,P.translateAndScale(c,H,z,D),c.beginPath(),c.rect(F.x,F.y,F.width,F.height),c.clip(),c.clearRect(F.x,F.y,F.width,F.height),w.$5c(c,F),c.restore()}},F.$5c=function(R,I){var P,S,k=this;k._93db(R),k.each(function($){k._56I[$._id]&&(P=k.getDataUI($),P&&(S=P._79o(),(!I||h.intersectsRect(I,S))&&(P.$7c=!0,P._42(R),delete P.$7c)))}),k._92db(R)},F.enableDashFlow=function(N){var D=this;D.$3c==Y&&(D.$3c=j(function(){D.$4c()},N||D.$2c||50))},F.disableDashFlow=function(){var T=this;r(T.$3c),delete T.$3c};var C=function(){var B=this,r=B._data,J=r instanceof K?"shape.":"edge.",x=r.s(J+"dash.pattern"),b=r.s(J+"dash.flow.reverse");if(x&&r.s(J+"dash")&&r.s(J+"dash.flow")&&B.$7c){var I=B.s(J+"dash.offset")||0,W=r.s(J+"dash.flow.step"),e=r.getStyleMap(),i=0;x.forEach(function($){i+=$}),b&&(W=-W),I-=W,I%=i,e||(r._styleMap=e={}),e[J+"dash.offset"]=I}};s._80o=function(V){z.call(this,V),C.call(this)},Q._80o=function(S){H.call(this,S),C.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);