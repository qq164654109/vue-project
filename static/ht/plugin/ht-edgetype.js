!function(b){"use strict";var Y="ht",V=b[Y],i=Math,f=i.max,I=i.min,q=i.abs,A=i.atan2,L=(i.cos,i.sin,i.ceil),B=V.Default,r=B.getInternal(),z=V.List,X=r.Mat,a=r.getNodeRect,t=r.intersectionLineRect,R=B.getDistance,o=B.setEdgeType,e="left",D="right",M="top",W="bottom",Q="edge.type",v="edge.gap",j="edge.center",d="edge.extend",H=function(O,Q){return a(O,Q).width},G=function(D,y){return a(D,y).height},J=function(c,l){return r.getEdgeAgentPosition(c,l._40I,l.s("edge.source.position"),l.s("edge.source.offset.x"),l.s("edge.source.offset.y"),l.s("edge.source.anchor.x"),l.s("edge.source.anchor.y"))},l=function(a,l){return r.getEdgeAgentPosition(a,l._41I,l.s("edge.target.position"),l.s("edge.target.offset.x"),l.s("edge.target.offset.y"),l.s("edge.target.anchor.x"),l.s("edge.target.anchor.y"))},T=function(f,g){var l=f.s(Q),B=f.getEdgeGroup();if(B){var P=0;if(B.eachSiblingEdge(function(R){g.isVisible(R)&&R.s(Q)==l&&P++}),P>1)return f.s(v)*(P-1)/2}return 0},h=function(p,E){var x=p.s(Q),b=p.isLooped();if(!p.getEdgeGroup())return b?p.s(v):0;var z,X=0,F=0,Z=0;return p.getEdgeGroup().getSiblings().each(function(N){N.each(function(W){if(W._40I===p._40I&&W.s(Q)==x&&E.isVisible(W)){var _=W.s(v);z?(F+=Z/2+_/2,Z=_):(z=W,Z=_),W===p&&(X=F)}})}),b?F-X+Z:X-F/2},U=function(F,A){var q=A.s("edge.corner.radius");return B.toRoundedCorner(F,q)};r.addMethod(V.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),o("boundary",function(I,T,F,D){D||(T=-T);var j,y=J(F,I),b=l(F,I),f=a(F,I._40I),r=a(F,I._41I),W=new X(A(b.y-y.y,b.x-y.x)),k=R(y,b),n=y.x,p=y.y;return j=W.tf(0,T),y={x:j.x+n,y:j.y+p},j=W.tf(k,T),b={x:j.x+n,y:j.y+p},j=t(y,b,f),j&&(y={x:j[0],y:j[1]}),j=t(y,b,r),j&&(b={x:j[0],y:j[1]}),{points:new z([y,b])}}),o("ripple",function($,q,D,f){f||(q=-q);var y=J(D,$),n=l(D,$),m=R(y,n),r=I($.s("edge.offset"),m/2),w=$.s("edge.ripple.size"),N=$.s("edge.ripple.length"),S=$.s("edge.ripple.both"),H=$.s(j),K=$.s("edge.ripple.elevation"),T=new z,p=$.s("edge.ripple.straight")?null:new z,U=new X(A(n.y-y.y,n.x-y.x));f||(K=-K),m-=2*r,N>0&&(w=L(m/N));var Q=m/w;p&&p.add(1);for(var b=0;w>b;b++)p&&p.add(3),0===b?T.add({x:r+Q*b,y:H?0:q}):T.add({x:r+Q*b,y:q}),T.add({x:r+Q*b+Q/2,y:K+q}),S&&(K=-K);for(T.add({x:r+m,y:H?0:q}),b=0;b<T.size();b++){var v=U.tf(T.get(b));v.x+=y.x,v.y+=y.y,T.set(b,v)}return{points:T,segments:p}}),o("h.v",function(i,v,K){v=h(i,K);var $=new z,V=i.s(j),F=J(K,i),s=F.x,Y=F.y,c=l(K,i),x=c.x,y=c.y,q=0,E=0,p=x-s,w=y-Y;return V||(q=H(K,i._40I)/2,E=G(K,i._41I)/2),p>=0&&0>=w?($.add({x:s+q,y:Y+v}),$.add({x:x+v,y:Y+v}),$.add({x:x+v,y:y+E})):0>=p&&w>=0?($.add({x:s-q,y:Y+v}),$.add({x:x+v,y:Y+v}),$.add({x:x+v,y:y-E})):p>=0&&w>=0?($.add({x:s+q,y:Y+v}),$.add({x:x-v,y:Y+v}),$.add({x:x-v,y:y-E})):($.add({x:s-q,y:Y+v}),$.add({x:x-v,y:Y+v}),$.add({x:x-v,y:y+E})),U($,i)}),o("v.h",function(u,a,s){a=h(u,s);var _=new z,g=u.s(j),m=J(s,u),R=m.x,Z=m.y,e=l(s,u),V=e.x,o=e.y,X=0,v=0,d=V-R,L=o-Z;return g||(X=H(s,u._41I)/2,v=G(s,u._40I)/2),d>=0&&0>=L?(_.add({x:R+a,y:Z-v}),_.add({x:R+a,y:o+a}),_.add({x:V-X,y:o+a})):0>=d&&L>=0?(_.add({x:R+a,y:Z+v}),_.add({x:R+a,y:o+a}),_.add({x:V+X,y:o+a})):d>=0&&L>=0?(_.add({x:R-a,y:Z+v}),_.add({x:R-a,y:o+a}),_.add({x:V-X,y:o+a})):(_.add({x:R-a,y:Z-v}),_.add({x:R-a,y:o+a}),_.add({x:V+X,y:o+a})),U(_,u)}),o("ortho",function(p,E,P){var T=new z,X=p.s(j),t=p.s("edge.ortho"),Z=p._40I,F=p._41I,d=J(P,p),C=d.x,B=d.y,V=l(P,p),r=V.x,u=V.y,v=r-C,O=u-B,D=X?0:H(P,Z)/2,Y=X?0:G(P,Z)/2,Q=X?0:H(P,F)/2,L=X?0:G(P,F)/2,I=(v-(D+Q)*(v>0?1:-1))*t,M=(O-(Y+L)*(O>0?1:-1))*t;return q(v)<q(O)?v>=0&&0>=O?(T.add({x:C+E,y:B-Y}),T.add({x:C+E,y:B+M+E-Y}),T.add({x:r+E,y:B+M+E-Y}),T.add({x:r+E,y:u+L})):0>=v&&O>=0?(T.add({x:C+E,y:B+Y}),T.add({x:C+E,y:B+M+E+Y}),T.add({x:r+E,y:B+M+E+Y}),T.add({x:r+E,y:u-L})):v>=0&&O>=0?(T.add({x:C+E,y:B+Y}),T.add({x:C+E,y:B+M-E+Y}),T.add({x:r+E,y:B+M-E+Y}),T.add({x:r+E,y:u-L})):(T.add({x:C+E,y:B-Y}),T.add({x:C+E,y:B+M-E-Y}),T.add({x:r+E,y:B+M-E-Y}),T.add({x:r+E,y:u+L})):v>=0&&0>=O?(T.add({x:C+D,y:B+E}),T.add({x:C+I+E+D,y:B+E}),T.add({x:C+I+E+D,y:u+E}),T.add({x:r-Q,y:u+E})):0>=v&&O>=0?(T.add({x:C-D,y:B+E}),T.add({x:C+I+E-D,y:B+E}),T.add({x:C+I+E-D,y:u+E}),T.add({x:r+Q,y:u+E})):v>=0&&O>=0?(T.add({x:C+D,y:B+E}),T.add({x:C+I-E+D,y:B+E}),T.add({x:C+I-E+D,y:u+E}),T.add({x:r-Q,y:u+E})):(T.add({x:C-D,y:B+E}),T.add({x:C+I-E-D,y:B+E}),T.add({x:C+I-E-D,y:u+E}),T.add({x:r+Q,y:u+E})),U(T,p)}),o("flex",function(F,b,O){var A=new z,x=F.s("edge.flex")+T(F,O),v=F.s(j),o=F._40I,r=F._41I,Y=J(O,F),N=Y.x,E=Y.y,Q=l(O,F),P=Q.x,d=Q.y,W=P-N,k=d-E,K=v?0:H(O,o)/2,$=v?0:G(O,o)/2,C=v?0:H(O,r)/2,t=v?0:G(O,r)/2,i=W>0?x:-x,s=k>0?x:-x;return q(W)<q(k)?W>=0&&0>=k?(A.add({x:N+b,y:E-$}),A.add({x:N+b,y:E+s+b-$}),A.add({x:P+b,y:d-s+b+t}),A.add({x:P+b,y:d+t})):0>=W&&k>=0?(A.add({x:N+b,y:E+$}),A.add({x:N+b,y:E+s+b+$}),A.add({x:P+b,y:d-s+b-t}),A.add({x:P+b,y:d-t})):W>=0&&k>=0?(A.add({x:N+b,y:E+$}),A.add({x:N+b,y:E+s-b+$}),A.add({x:P+b,y:d-s-b-t}),A.add({x:P+b,y:d-t})):(A.add({x:N+b,y:E-$}),A.add({x:N+b,y:E+s-b-$}),A.add({x:P+b,y:d-s-b+t}),A.add({x:P+b,y:d+t})):W>=0&&0>=k?(A.add({x:N+K,y:E+b}),A.add({x:N+i+b+K,y:E+b}),A.add({x:P-i+b-C,y:d+b}),A.add({x:P-C,y:d+b})):0>=W&&k>=0?(A.add({x:N-K,y:E+b}),A.add({x:N+i+b-K,y:E+b}),A.add({x:P-i+b+C,y:d+b}),A.add({x:P+C,y:d+b})):W>=0&&k>=0?(A.add({x:N+K,y:E+b}),A.add({x:N+i-b+K,y:E+b}),A.add({x:P-i-b-C,y:d+b}),A.add({x:P-C,y:d+b})):(A.add({x:N-K,y:E+b}),A.add({x:N+i-b-K,y:E+b}),A.add({x:P-i-b+C,y:d+b}),A.add({x:P+C,y:d+b})),U(A,F)}),o("extend.east",function(Q,g,E){var X=new z,i=Q.s(d)+T(Q,E),D=Q.s(j),$=J(E,Q),y=$.x+(D?0:H(E,Q._40I)/2),S=$.y,P=l(E,Q),N=P.x+(D?0:H(E,Q._41I)/2),v=P.y,I=f(y,N)+i;return S>v?(X.add({x:y,y:S+g}),X.add({x:I+g,y:S+g}),X.add({x:I+g,y:v-g}),X.add({x:N,y:v-g})):(X.add({x:y,y:S-g}),X.add({x:I+g,y:S-g}),X.add({x:I+g,y:v+g}),X.add({x:N,y:v+g})),U(X,Q)}),o("extend.west",function(V,y,O){var R=new z,h=V.s(d)+T(V,O),Y=V.s(j),B=J(O,V),k=B.x-(Y?0:H(O,V._40I)/2),b=B.y,M=l(O,V),f=M.x-(Y?0:H(O,V._41I)/2),s=M.y,p=I(k,f)-h;return b>s?(R.add({x:k,y:b+y}),R.add({x:p-y,y:b+y}),R.add({x:p-y,y:s-y}),R.add({x:f,y:s-y})):(R.add({x:k,y:b-y}),R.add({x:p-y,y:b-y}),R.add({x:p-y,y:s+y}),R.add({x:f,y:s+y})),U(R,V)}),o("extend.north",function(C,S,k){var B=new z,Y=C.s(d)+T(C,k),c=C.s(j),u=J(k,C),s=u.x,y=u.y-(c?0:G(k,C._40I)/2),o=l(k,C),H=o.x,O=o.y-(c?0:G(k,C._41I)/2),n=I(y,O)-Y;return s>H?(B.add({y:y,x:s+S}),B.add({y:n-S,x:s+S}),B.add({y:n-S,x:H-S}),B.add({y:O,x:H-S})):(B.add({y:y,x:s-S}),B.add({y:n-S,x:s-S}),B.add({y:n-S,x:H+S}),B.add({y:O,x:H+S})),U(B,C)}),o("extend.south",function(g,L,u){var s=new z,S=g.s(d)+T(g,u),t=g.s(j),m=J(u,g),h=m.x,M=m.y+(t?0:G(u,g._40I)/2),B=l(u,g),n=B.x,v=B.y+(t?0:G(u,g._41I)/2),p=f(M,v)+S;return h>n?(s.add({y:M,x:h+L}),s.add({y:p+L,x:h+L}),s.add({y:p+L,x:n-L}),s.add({y:v,x:n-L})):(s.add({y:M,x:h-L}),s.add({y:p+L,x:h-L}),s.add({y:p+L,x:n+L}),s.add({y:v,x:n+L})),U(s,g)});var P=function(c,E,u,U,X){if(U.sort(function(V,J){var I=V.getSourceAgent()===E?V.getTargetAgent():V.getSourceAgent(),q=J.getSourceAgent()===E?J.getTargetAgent():J.getSourceAgent(),O=I.p(),Y=q.p();if(u===e||u===D){if(O.y>Y.y)return 1;if(O.y<Y.y)return-1}else{if(O.x>Y.x)return 1;if(O.x<Y.x)return-1}return B.sortFunc(V.getId(),J.getId())}),X){for(var S,x,k,Q=c.getSourceAgent(),g=c.getTargetAgent(),F=0;F<U.size();F++){var n=U.get(F);n.getSourceAgent()===Q&&n.getTargetAgent()===g||n.getTargetAgent()===Q&&n.getSourceAgent()===g?(x||(x=new z),x.add(n,0)):x?(k||(k=new z),k.add(n)):(S||(S=new z),S.add(n))}U.clear(),S&&U.addAll(S),x&&U.addAll(x),k&&U.addAll(k)}var y=U.indexOf(c),A=U.size(),l=c.s(v);return{side:u,index:y,size:A,offset:-l*(A-1)/2+l*y}},p=function(o,G,m,s,y){var k=G.s(Q);return P(G,m,s,m.getAgentEdges().toList(function(B){return o.isVisible(B)&&B.s(Q)===k}),y)},_=function(p,d){var $=p.getSourceAgent()===d?p.getTargetAgent():p.getSourceAgent(),v=d.p(),w=$.p(),L=w.x-v.x,R=w.y-v.y;return L>0&&q(R)<=L?D:0>L&&q(R)<=-L?e:R>0&&q(L)<=R?W:M},m=function(T,t,g){var p=t.s(Q),V=_(t,g);return P(t,g,V,g.getAgentEdges().toList(function(O){return T.isVisible(O)&&O.s(Q)===p&&_(O,g)===V}))},w=function(y,V){var s=y.getSourceAgent()===V,Y=s?y.getTargetAgent():y.getSourceAgent(),H=V.p(),J=Y.p();return s?H.y>J.y?M:W:H.x<J.x?D:e},O=function(I,V,k){var G=V.s(Q),z=w(V,k);return P(V,k,z,k.getAgentEdges().toList(function(F){return I.isVisible(F)&&F.s(Q)===G&&w(F,k)===z}),z===D||z===W)},s=function(l,Y){var n=l.getSourceAgent()===Y,L=n?l.getTargetAgent():l.getSourceAgent(),k=Y.p(),w=L.p();return n?k.x<w.x?D:e:k.y>w.y?M:W},n=function(j,i,N){var H=i.s(Q),V=s(i,N);return P(i,N,V,N.getAgentEdges().toList(function(x){return j.isVisible(x)&&x.s(Q)===H&&s(x,N)===V}),V===D||V===W)},k=function(V,Z,R){var $=V.getSourceAgent(),B=V.getTargetAgent(),w=$.getId()>B.getId(),L=w?B:$,E=w?$:B,s=L.p(),u=E.p(),d=R(Z,V,L),O=R(Z,V,E),q=V.s(j),l=q?0:H(Z,L)/2,n=q?0:H(Z,E)/2,N=q?0:G(Z,L)/2,J=q?0:G(Z,E)/2,k=d.offset,v=O.offset,h=d.side,T=O.side,Y=new z;return h===M?(Y.add({x:s.x+k,y:s.y-N}),Y.add({x:s.x+k,y:u.y+v}),T===e?Y.add({x:u.x-n,y:u.y+v}):Y.add({x:u.x+n,y:u.y+v})):h===W?(Y.add({x:s.x+k,y:s.y+N}),Y.add({x:s.x+k,y:u.y+v}),T===e?Y.add({x:u.x-n,y:u.y+v}):Y.add({x:u.x+n,y:u.y+v})):h===e?(Y.add({x:s.x-l,y:s.y+k}),Y.add({x:u.x+v,y:s.y+k}),T===W?Y.add({x:u.x+v,y:u.y+J}):Y.add({x:u.x+v,y:u.y-J})):h===D&&(Y.add({x:s.x+l,y:s.y+k}),Y.add({x:u.x+v,y:s.y+k}),T===W?Y.add({x:u.x+v,y:u.y+J}):Y.add({x:u.x+v,y:u.y-J})),w&&Y.reverse(),U(Y,V)};o("ortho2",function(T,c,P){var B,Z,u=T.s(j),A=T.s("edge.ortho"),b=T.getSourceAgent(),S=T.getTargetAgent(),v=b.getId()>S.getId(),O=v?S:b,r=v?b:S,x=O.p(),o=r.p(),k=m(P,T,O),$=m(P,T,r),t=u?0:H(P,O)/2,w=u?0:G(P,O)/2,V=u?0:H(P,r)/2,l=u?0:G(P,r)/2,q=new z,i=k.offset,Y=$.offset,J=k.side;return J===D?(B=o.y>x.y?-i:i,Z=x.x+t+(o.x-V-x.x-t)*A,q.add({x:x.x+t,y:x.y+i}),q.add({x:Z+B,y:x.y+i}),q.add({x:Z+B,y:o.y+Y}),q.add({x:o.x-V,y:o.y+Y})):J===e?(B=o.y>x.y?-i:i,Z=x.x-t-(x.x-t-o.x-V)*A,q.add({x:x.x-t,y:x.y+i}),q.add({x:Z-B,y:x.y+i}),q.add({x:Z-B,y:o.y+Y}),q.add({x:o.x+V,y:o.y+Y})):J===W?(B=o.x>x.x?-i:i,Z=x.y+w+(o.y-l-x.y-w)*A,q.add({x:x.x+i,y:x.y+w}),q.add({x:x.x+i,y:Z+B}),q.add({x:o.x+Y,y:Z+B}),q.add({x:o.x+Y,y:o.y-l})):J===M&&(B=o.x>x.x?-i:i,Z=x.y-w-(x.y-w-o.y-l)*A,q.add({x:x.x+i,y:x.y-w}),q.add({x:x.x+i,y:Z-B}),q.add({x:o.x+Y,y:Z-B}),q.add({x:o.x+Y,y:o.y+l})),v&&q.reverse(),U(q,T)},!0),o("flex2",function(c,B,g){var k,O=c.getSourceAgent(),h=c.getTargetAgent(),Q=O.getId()>h.getId(),R=Q?h:O,L=Q?O:h,n=R.p(),X=L.p(),y=m(g,c,R),K=m(g,c,L),f=c.s(j),E=c.s("edge.flex")+(y.size-1)/2*c.s(v),x=f?0:H(g,R)/2,V=f?0:G(g,R)/2,a=f?0:H(g,L)/2,b=f?0:G(g,L)/2,Z=new z,F=y.offset,N=K.offset,A=y.side;return A===D?(k=X.y>n.y?-F:F,Z.add({x:n.x+x,y:n.y+F}),Z.add({x:n.x+x+E+k,y:n.y+F}),Z.add({x:X.x-a-E+k,y:X.y+N}),Z.add({x:X.x-a,y:X.y+N})):A===e?(k=X.y>n.y?-F:F,Z.add({x:n.x-x,y:n.y+F}),Z.add({x:n.x-x-E-k,y:n.y+F}),Z.add({x:X.x+a+E-k,y:X.y+N}),Z.add({x:X.x+a,y:X.y+N})):A===W?(k=X.x>n.x?-F:F,Z.add({x:n.x+F,y:n.y+V}),Z.add({x:n.x+F,y:n.y+V+E+k}),Z.add({x:X.x+N,y:X.y-b-E+k}),Z.add({x:X.x+N,y:X.y-b})):A===M&&(k=X.x>n.x?-F:F,Z.add({x:n.x+F,y:n.y-V}),Z.add({x:n.x+F,y:n.y-V-E-k}),Z.add({x:X.x+N,y:X.y+b+E-k}),Z.add({x:X.x+N,y:X.y+b})),Q&&Z.reverse(),U(Z,c)},!0),o("extend.north2",function(m,g,c){var W=m.getSourceAgent(),r=m.getTargetAgent(),O=W.getId()>r.getId(),i=O?r:W,e=O?W:r,Y=i.p(),w=e.p(),X=p(c,m,i,M),P=p(c,m,e,M,!0),n=m.s(j),Z=n?0:G(c,i)/2,C=n?0:G(c,e)/2,o=X.offset,B=P.offset,K=m.s(d)+(X.size-1)/2*m.s(v),E=I(Y.y-Z,w.y-C)-K+(Y.x<w.x?o:-o),_=new z;return _.add({x:Y.x+o,y:Y.y-Z}),_.add({x:Y.x+o,y:E}),_.add({x:w.x+B,y:E}),_.add({x:w.x+B,y:w.y-C}),O&&_.reverse(),U(_,m)},!0),o("extend.south2",function(l,B,w){var r=l.getSourceAgent(),F=l.getTargetAgent(),I=r.getId()>F.getId(),L=I?F:r,M=I?r:F,o=L.p(),t=M.p(),P=p(w,l,L,W),g=p(w,l,M,W,!0),q=l.s(j),J=q?0:G(w,L)/2,Y=q?0:G(w,M)/2,N=P.offset,x=g.offset,c=l.s(d)+(P.size-1)/2*l.s(v),A=f(o.y+J,t.y+Y)+c+(o.x>t.x?N:-N),n=new z;return n.add({x:o.x+N,y:o.y+J}),n.add({x:o.x+N,y:A}),n.add({x:t.x+x,y:A}),n.add({x:t.x+x,y:t.y+Y}),I&&n.reverse(),U(n,l)},!0),o("extend.west2",function(J,Q,s){var C=J.getSourceAgent(),o=J.getTargetAgent(),L=C.getId()>o.getId(),K=L?o:C,S=L?C:o,u=K.p(),x=S.p(),V=p(s,J,K,M),$=p(s,J,S,M,!0),F=J.s(j),l=F?0:H(s,K)/2,R=F?0:H(s,S)/2,Y=V.offset,r=$.offset,n=J.s(d)+(V.size-1)/2*J.s(v),q=I(u.x-l,x.x-R)-n+(u.y<x.y?Y:-Y),y=new z;return y.add({x:u.x-l,y:u.y+Y}),y.add({x:q,y:u.y+Y}),y.add({x:q,y:x.y+r}),y.add({x:x.x-R,y:x.y+r}),L&&y.reverse(),U(y,J)},!0),o("extend.east2",function(G,l,k){var O=G.getSourceAgent(),$=G.getTargetAgent(),y=O.getId()>$.getId(),A=y?$:O,u=y?O:$,i=A.p(),B=u.p(),C=p(k,G,A,M),R=p(k,G,u,M,!0),n=G.s(j),I=n?0:H(k,A)/2,w=n?0:H(k,u)/2,r=C.offset,P=R.offset,o=G.s(d)+(C.size-1)/2*G.s(v),Q=f(i.x+I,B.x+w)+o+(i.y>B.y?r:-r),N=new z;return N.add({x:i.x+I,y:i.y+r}),N.add({x:Q,y:i.y+r}),N.add({x:Q,y:B.y+P}),N.add({x:B.x+w,y:B.y+P}),y&&N.reverse(),U(N,G)},!0),o("v.h2",function(h,W,w){return k(h,w,O)},!0),o("h.v2",function(O,s,Z){return k(O,Z,n)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);