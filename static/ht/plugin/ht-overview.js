!function(_,y){"use strict";var c="ht",t=c+".graph.",E=_[c],D=E.graph,x=E.Default,q=E.Color,A=null,r="px",R=x.getInternal(),Y=R.getPinchDist,$=x.preventDefault,B=x.getTouchCount,l=x.startDragging;R.addMethod(x,{overviewBackground:q.widgetBackground,overviewMaskBackground:q.transparent,overviewContentBorderColor:q.widgetBorder,overviewContentBackground:q.background},!0),D.Overview=function(t){var G=this,$=G._view=R.createView(1,G);G._canvas=R.createCanvas($),$.style.background=x.overviewBackground,$.appendChild(G._mask=R.createDiv()),G.setGraphView(t),G.addListeners()},x.def(t+"Overview",y,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:x.overviewMaskBackground,_contentBorderColor:x.overviewContentBorderColor,_contentBackground:x.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(y){var d=this;if(d.gv!==y){var W=d.gv;d.gv=y,W&&(W.removeViewListener(d.handleGraphViewChanged,d),W.ump(d.handleGraphViewPropertyChanged,d)),y&&(y.addViewListener(d.handleGraphViewChanged,d),y.mp(d.handleGraphViewPropertyChanged,d)),d.fp("graphView",W,y),d.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(j){this._autoUpdate&&"validate"===j.kind&&this.redraw()},handleGraphViewPropertyChanged:function(W){("canvasBackground"===W.property||this.getFixToRect()&&("zoom"===W.property||"translateX"===W.property||"translateY"===W.property))&&this.redraw()},redraw:function(){var T=this;T._redraw||(T._redraw=1,T.iv(50))},validateImpl:function(){var k=this,o=k.gv,h=k._canvas,I=k.getWidth(),e=k.getHeight(),c=k._redraw;if(o){var z=k._mask,Z=z.style,U=o.getViewRect(),P=this.getFixToRect(),i=P?"boolean"==typeof P?o.getContentRect():P:o.getScrollRect(),D=i.x,_=i.y,S=i.width,F=i.height,j=k._rate=Math.max(S/I,F/e),C=k._x=(I-S/j)/2,s=k._y=(e-F/j)/2;if(0!==U.width&&0!==U.height||k.hasRetry||(x.callLater(k.iv,k,A),k.hasRetry=!0),(I!==h.clientWidth||e!==h.clientHeight)&&(R.setCanvas(h,I,e),c=1),R.isSameRect(i,k._scrollRect)||(k._scrollRect=i,c=1),c){var G=R.initContext(h),B=o.getDataModel().getBackground()||k._contentBackground,$=k._contentBorderColor,d=x.devicePixelRatio;G.clearRect(0,0,I*d,e*d),B&&R.fillRect(G,C*d,s*d,S/j*d,F/j*d,B),R.translateAndScale(G,-D/j+C,-_/j+s,1/j),o._42(G),G.restore(),$&&R.drawBorder(G,$,C*d,s*d,S/j*d,F/j*d)}Z.background=k._maskBackground,Z.left=C+(U.x-D)/j+r,Z.top=s+(U.y-_)/j+r,Z.width=U.width/j+r,Z.height=U.height/j+r,k._redraw=null}else if(c){var G=R.initContext(h);G.clearRect(0,0,I,e),G.restore(),k._redraw=null}},center:function(z){var N=this,W=N.gv;if(W){var C=W._zoom,r=W._29I,b=N._rate,B=N._scrollRect,n=x.getLogicalPoint(z,N._canvas),g=B.x+(n.x-N._x)*b,V=B.y+(n.y-N._y)*b;W.setTranslate((r.width/2-g)*C,(r.height/2-V)*C)}},handle_mousedown:function(u){this.handle_touchstart(u)},handleWindowMouseUp:function(F){this.handleWindowTouchEnd(F)},handleWindowMouseMove:function(f){this.handleWindowTouchMove(f)},handle_mousewheel:function(E){this.handleScroll(E,E.wheelDelta)},handle_DOMMouseScroll:function(B){2===B.axis&&this.handleScroll(B,-B.detail)},handleScroll:function(e,S){if($(e),this.gv){var g=this.gv;S>0?g.scrollZoomIn():0>S&&g.scrollZoomOut()}},handle_touchstart:function(w){if($(w),this.gv&&x.isLeftButton(w)){var p=this,o=p.gv,g=B(w);1===g?x.isDoubleClick(w)&&o.isResettable()?o.reset():(p.center(w),l(p,w)):2===g&&(p._dist=Y(w),l(p,w))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(I){if(this.gv){var W=this,y=W._dist,O=B(I);1===O?W.center(I):2===O&&y!=A&&W.gv.handlePinch(A,Y(I),y)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);